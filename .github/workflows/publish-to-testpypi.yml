name: Publish Python distribution TestPyPI

on: push

jobs:
  build and upload:
    name: Build distribution and upload to TestPyPi
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: "3.9"
    - name: Install pypa/build
      run: python3 -m pip install build --user
    - name: Build a binary wheel and a source tarball
      run: python3 -m build
    - name: Install twine
      run: python3 -m pip install --upgrade twine
    - name: Upload to TestPyPi
      run: python3 -m twine upload --repository testpypi dist/*
      env:
	TWINE_USERNAME: __token__
	TWINE_PASSWORD: ${{ secrets.TEST_PYPI_API_TOKEN }}
	TWINE_REPOSITORY: testpypi

	
